# calc
–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –Ω–∞ –û–±—Ä–∞—Ç–Ω–æ–π –ø–æ–ª—å—Å–∫–æ–π –Ω–æ—Ç–∞—Ü–∏–∏.

–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å - `Expression`.
–û–Ω —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–º –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ.
–í –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏:
* `+` -- —Å–ª–æ–∂–µ–Ω–∏–µ
* `-`, `‚àí` -- –≤—ã—á–∏—Ç–∞–Ω–∏–µ
* `*`, [`‚àô`](https://unicode-table.com/2219), [`‚àó`](https://unicode-table.com/2217), [`√ó`](https://unicode-table.com/00D7), [`‚úï`](https://unicode-table.com/2715) -- —É–º–Ω–æ–∂–µ–Ω–∏–µ
* `/`, [`√∑`](https://unicode-table.com/00F7), [`‚àï`](https://unicode-table.com/2215) -- –¥–µ–ª–µ–Ω–∏–µ
* `^` -- –≤–æ–∑–≤–µ–¥–µ–Ω–∏–µ –≤ —Å—Ç–µ–ø–µ–Ω—å
* `!` -- —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª
* `%` -- –ø–µ—Ä–µ–≤–æ–¥ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç—ã
* [`‚àö`](https://unicode-table.com/221A), `sqrt` -- —Ä–∞–¥–∏–∫–∞–ª (–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π –∫–æ—Ä–µ–Ω—å)
* `log` -- –ª–æ–≥–∏—Ä–∏—Ñ–º –ø–æ –æ—Å–Ω–æ–≤–∞–Ω–∏—é 10
* `ln` -- –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π –ª–æ–≥–∞—Ä–∏—Ñ–º
* `exp` -- —ç–∫—Å–ø–æ–Ω–µ–Ω—Ç–∞
* `abs` -- –∞–±—Å–æ–ª—é—Ç–Ω–∞—è –≤–µ–ª–∏—á–∏–Ω–∞
* `sgn` -- —Å–∏–≥–Ω—É–º
* `sin` -- —Å–∏–Ω—É—Å
* `cos` -- –∫–æ—Å–∏–Ω—É—Å
* `tan`, `tg` -- —Ç–∞–Ω–≥–µ–Ω—Å
* `cot`, `ctg` -- –∫–æ—Ç–∞–Ω–≥–µ–Ω—Å
* `arcsin` -- –∞—Ä–∫—Å–∏–Ω—É—Å
* `arccos` -- –∞—Ä–∫–∫–æ—Å–∏–Ω—É—Å
* `arctan`, `arctg` -- –∞—Ä–∫—Ç–∞–Ω–≥–µ–Ω—Å
* `arccot`, `arcctg` -- –∞—Ä–∫–∫–æ—Ç–∞–Ω–≥–µ–Ω—Å
* `sinh`, `sh` -- –≥–∏–ø–µ—Ä–±–æ–ª–∏—á–µ—Å–∫–∏–π —Å–∏–Ω—É—Å
* `cosh`, `ch` -- –≥–∏–ø–µ—Ä–±–æ–ª–∏—á–µ—Å–∫–∏–π –∫–æ—Å–∏–Ω—É—Å
* `tanh`, `th` -- –≥–∏–ø–µ—Ä–±–æ–ª–∏—á–µ—Å–∫–∏–π —Ç–∞–Ω–≥–µ–Ω—Å
* `coth`, `cth` -- –≥–∏–ø–µ—Ä–±–æ–ª–∏—á–µ—Å–∫–∏–π –∫–æ—Ç–∞–Ω–≥–µ–Ω—Å

–í—ã—Ä–∞–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤ —Å–µ–±–µ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã. –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –∏ –¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã –ø–æ–∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω—ã —É —è–∑—ã–∫–∞ Java, –ø–æ—ç—Ç–æ–º—É –≤—Å–µ —Å–∏–º–≤–æ–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –≤ Java, –º–æ–≥—É—Ç —Ç–∞–∫–∂–µ –±—ã—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏ –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–∏.
–î–æ–ø—É—Å—Ç–∏–º—ã–µ –∏–º–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç:
```
a, b, c, const1
–∑–Ω–∞—á–µ–Ω–∏–µ1, –∑–Ω–∞—á–µ–Ω–∏–µ2, –≤—ã—Å–æ—Ç–∞, —à–∏—Ä–∏–Ω–∞
```

–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –Ω–µ –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Ç–µ –∂–µ –∏–º–µ–Ω–∞ —á—Ç–æ –∏ —Ñ—É–Ω–∫—Ü–∏–∏.
–ü–æ–º–∏–º–æ —ç—Ç–æ–≥–æ, –¥–ª—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω—ã –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
* `pi`, [`œÄ`](https://unicode-table.com/03C0), [`ùúã`](https://unicode-table.com/1D70B) -- —á–∏—Å–ª–æ –ü–∏;
* `e`, [`ùëí`](https://unicode-table.com/1D452) -- —ç–∫—Å–ø–æ–Ω–µ–Ω—Ç–∞.

–°–∏–Ω—Ç–∞–∫—Å–∏—Å –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π –±–ª–∏–∑–æ–∫ –∫ –∫–ª–∞—Å–∏—á–µ—Å–∫–æ–º—É, –Ω–æ –∏–º–µ–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —É–ª—É—á—à–µ–Ω–∏—è.
–°–∏–º–≤–æ–ª—ã –ø—Ä–æ–±–µ–ª–∞, –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫–∏ –∏ —Ç–∞–±—É–ª—è—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –æ–ø–µ—Ä–∞–Ω–¥–æ–≤, –µ—Å–ª–∏
–Ω–∞–ø–∏—Å–∞—Ç—å –¥–≤–∞ –æ–ø–µ—Ä–∞–Ω–¥–∞ —Ä–∞–∑–¥–µ–ª—å–Ω–æ, —ç—Ç–æ –±—É–¥–µ—Ç —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ –æ–ø–µ—Ä–∞—Ü–∏–∏ —É–º–Ω–æ–∂–µ–Ω–∏—è.
–ö—Ä–æ–º–µ —ç—Ç–æ–≥–æ, –¥–µ—Å—è—Ç–∏—á–Ω—ã–µ –¥—Ä–æ–±–∏ –º–æ–∂–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å, –æ–ø—É—Å–∫–∞—è –Ω–æ–ª—å –ø–µ—Ä–µ–¥ —Ç–æ—á–∫–æ–π.
–¢–∞–∫, —Å–ª–µ–¥—É—é—â–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã:

```
2a     <==> 2 a <==> 2 * a
sin pi <==> sin(pi)
‚àö-4    <==> ‚àö(-4)
0.24   <==> .24
0.     <==> .0 <==> . <==> 0
(2a sin 3)(a b cos c) <==> (2*a*sin(3))*(a*b*cos(c))
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
```java
import mitasov.calc.Expression;
```
#### –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä:

```java
Expression e = new Expression("2+2"); //—Ü–µ–ª—ã–µ —á–∏—Å–ª–∞
double res1 = e.evaluate(); // == 4

e = new Expression("2.564 * 2"); //–¥—Ä–æ–±–Ω—ã–µ
res = e.evaluate(); // == 5.128

e = new Expression("2,5 - 3", ',') //–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å–∏–º–≤–æ–ª –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–∏
res = e.evaluate(); // == -0.5
```

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç

```java
Expression e = new Expression("a+b"); // a –∏ b –±—É–¥—É—Ç –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è null

e.getConstants().put("a", 3);
e.getConstants().put("b", 4);

double res = e.evaluate(); // == 7
```

##### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç:

```java
Set<String> names = e.getConstants().names(); //–Ω–∞–±–æ—Ä –∏–º—ë–Ω –∫–æ–Ω—Å—Ç–∞–Ω—Ç –∏–∑ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
Set<Map.Entry<String, Double>> entries = e.getConstants().entrySet(); //–Ω–∞–±–æ—Ä –ø–∞—Ä –∏–º—è=–∑–Ω–∞—á–µ–Ω–∏–µ
Collection<Double> values = e.getConstants().values(); //–∫–æ–ª–ª–µ–∫—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π


for (String name : names) { //–ø—Ä–∏–º–µ—Ä –∏—Ç–µ—Ä–∞—Ü–∏–∏ –ø–æ –∏–º–µ–Ω–∞–º
    System.out.println(name); //–≤—ã–≤–µ–¥–µ—Ç –∏–º—è
    System.out.println(e.getConstants().get(name)); //–≤—ã–≤–µ–¥–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ
}
```

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ö–ª–∞—Å—Å `Expression` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–µ—Ç
–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `ExpressionException`. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∞—è –æ—à–∏–±–∫–∞
–ø—Ä–æ–∏–∑–æ—à–ª–∞, –º–æ–∂–Ω–æ, –≤—ã–∑–≤–∞–≤ –º–µ—Ç–æ–¥ `ExpressionException#getCode()`. –ú–µ—Ç–æ–¥
–≤–µ—Ä–Ω—ë—Ç enum-—ç–ª–µ–º–µ–Ω—Ç —Ç–∏–ø–∞ `ExpressionException.Code`. –ö–æ–¥—ã –æ—à–∏–±–æ–∫ –±—ã–≤–∞—é—Ç
—Å–ª–µ–¥—É—é—â–∏–µ:

###### –û—à–∏–±–∫–∏ –≤ —Ö–æ–¥–µ –∞–Ω–∞–ª–∏–∑–∞ (–ª–µ–∫—Å–∏—á–µ—Å–∫–∏–µ –∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ)
* `INVALID_CHARACTER` - –Ω–µ–≤–µ—Ä–Ω—ã–π (–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π) —Å–∏–º–≤–æ–ª;
* `WRONG_NUMBER` - –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —á–∏—Å–ª–∞;
* `OPERATOR_WITHOUT_OPERAND` - –Ω–µ —É–∫–∞–∑–∞–Ω –æ–ø–µ—Ä–∞–Ω–¥ –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ (–Ω–∞–ø—Ä. "2+");
* `RPAREN_UNEXPECTED` - –Ω–µ–≤–µ—Ä–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–∫–∏;
* `LPAREN_MISSING` - –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–∫–∏ (–∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞ –±–µ–∑ –æ—Ç–∫—Ä—ã–≤–∞—é—â–µ–π);
* `UNEXPECTED_END` - –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –∫–æ–Ω–µ—Ü –≤—ã—Ä–∞–∂–µ–Ω–∏—è;

###### –û—à–∏–±–∫–∏ –≤ —Ö–æ–¥–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
* `SQRT_OF_NEG` - –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π –∫–æ—Ä–µ–Ω—å –∏–∑ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ —á–∏—Å–ª–∞;
* `FACT_OF_NEG` - —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ —á–∏—Å–ª–∞;
* `LOG_OF_NEG` - –ª–æ–≥–∞—Ä–∏—Ñ–º –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ —á–∏—Å–ª–∞;
* `UNDEFINED_CONST` - –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ (–Ω–µ —É–∫–∞–∑–∞–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ);
* `DIV_BY_ZERO` - –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å;

–û–±—ä–µ–∫—Ç `ExpressionException` –∫—Ä–æ–º–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∫–æ–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
–æ –ø–æ–∑–∏—Ü–∏–∏ –æ—à–∏–±–æ—á–Ω–æ–π –ø–æ–¥—Å—Ç—Ä–æ–∫–∏ –∏ –æ –µ—ë –¥–ª–∏–Ω–µ

```java
try {
    Expression e = new Expression("26+*983"); // –±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å–∏–º–≤–æ–ª–µ '*'
} catch (ExpressionException e) {
    System.out.println(e.getCode());     // –≤—ã–≤–µ–¥–µ—Ç OPERATOR_WITHOUT_OPERAND
    System.out.println(e.getMessage());  // –≤—ã–≤–µ–¥–µ—Ç "Operator used without operand"
    System.out.println(e.getPosition()); // –≤—ã–≤–µ–¥–µ—Ç 3
    System.out.println(e.getLength());   // –≤—ã–≤–µ–¥–µ—Ç 1
    System.out.println(e.getEndPosition()); // —Ç–æ –∂–µ —á—Ç–æ –∏ —Å—É–º–º–∞ –ø–æ–∑–∏—Ü–∏–∏ –∏ –¥–ª–∏–Ω—ã
}
```

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—ã—á–∏—Å–ª–∏—Ç—å –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –Ω–µ –Ω–∞–∑–Ω–∞—á–∏–≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º –∑–Ω–∞—á–µ–Ω–∏—è, –º–µ—Ç–æ–¥
`evaluate()` –±—É–¥–µ—Ç –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É —Å –∫–æ–¥–æ–º `UNDEFINED_CONST`

–í —Å–ª—É—á–∞—è—Ö –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å –∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ —á–∏—Å–ª–∞, –º–µ—Ç–æ–¥
`evaluate()` –Ω–µ –±—É–¥–µ—Ç –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –∞ –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `Infinite`
–∏–ª–∏ `NaN`. –ß—Ç–æ–±—ã "–≤–∫–ª—é—á–∏—Ç—å" –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ `evaluateStrict()`:

```java
try {
    Expression e = new Expression("10 / 0");
    double d = e.evaluate(); // –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å

    d = e.evaluateStrict();
} catch (ExpressionException e) {
    System.out.println(e.getCode()); // DIV_BY_ZERO
}
```